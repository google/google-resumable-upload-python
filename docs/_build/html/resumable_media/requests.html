

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Requests Utilities &#8212; google-resumable-media  documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Changelog" href="../changelog.html" />
    <link rel="prev" title="Common Utilities" href="common.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>

  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
          	<div class="admonition" id="python2-eol"> 
          	 As of January 1, 2020 this library no longer supports Python 2 on the latest released version. 
          	 Library versions released prior to that date will continue to be available. For more information please
          	 visit <a href="https://cloud.google.com/python/docs/python2-sunset/">Python 2 support on Google Cloud</a>.
          	</div>
            
  <div class="section" id="module-google.resumable_media.requests">
<span id="requests-utilities"></span><h1>Requests Utilities<a class="headerlink" href="#module-google.resumable_media.requests" title="Permalink to this headline">¶</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">requests</span></code> utilities for Google Media Downloads and Resumable Uploads.</p>
<p>This sub-package assumes callers will use the <a class="reference external" href="http://docs.python-requests.org/">requests</a> library
as transport and <a class="reference external" href="https://google-auth.readthedocs.io/">google-auth</a> for sending authenticated HTTP traffic
with <code class="docutils literal notranslate"><span class="pre">requests</span></code>.</p>
<div class="section" id="authorized-transport">
<h2>Authorized Transport<a class="headerlink" href="#authorized-transport" title="Permalink to this headline">¶</a></h2>
<p>To use <code class="docutils literal notranslate"><span class="pre">google-auth</span></code> and <code class="docutils literal notranslate"><span class="pre">requests</span></code> to create an authorized transport
that has read-only access to Google Cloud Storage (GCS):</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">google.auth</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">google.auth.transport.requests</span> <span class="k">as</span> <span class="nn">tr_requests</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ro_scope</span> <span class="o">=</span> <span class="sa">u</span><span class="s1">&#39;https://www.googleapis.com/auth/devstorage.read_only&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">credentials</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">google</span><span class="o">.</span><span class="n">auth</span><span class="o">.</span><span class="n">default</span><span class="p">(</span><span class="n">scopes</span><span class="o">=</span><span class="p">(</span><span class="n">ro_scope</span><span class="p">,))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transport</span> <span class="o">=</span> <span class="n">tr_requests</span><span class="o">.</span><span class="n">AuthorizedSession</span><span class="p">(</span><span class="n">credentials</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transport</span>
<span class="go">&lt;google.auth.transport.requests.AuthorizedSession object at 0x...&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="simple-downloads">
<h2>Simple Downloads<a class="headerlink" href="#simple-downloads" title="Permalink to this headline">¶</a></h2>
<p>To download an object from Google Cloud Storage, construct the media URL
for the GCS object and download it with an authorized transport that has
access to the resource:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">google.resumable_media.requests</span> <span class="kn">import</span> <span class="n">Download</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url_template</span> <span class="o">=</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="sa">u</span><span class="s1">&#39;https://www.googleapis.com/download/storage/v1/b/&#39;</span>
<span class="gp">... </span>    <span class="sa">u</span><span class="s1">&#39;</span><span class="si">{bucket}</span><span class="s1">/o/</span><span class="si">{blob_name}</span><span class="s1">?alt=media&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">media_url</span> <span class="o">=</span> <span class="n">url_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">bucket</span><span class="o">=</span><span class="n">bucket</span><span class="p">,</span> <span class="n">blob_name</span><span class="o">=</span><span class="n">blob_name</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">download</span> <span class="o">=</span> <span class="n">Download</span><span class="p">(</span><span class="n">media_url</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">download</span><span class="o">.</span><span class="n">consume</span><span class="p">(</span><span class="n">transport</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">download</span><span class="o">.</span><span class="n">finished</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span>
<span class="go">&lt;Response [200]&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="sa">u</span><span class="s1">&#39;Content-Length&#39;</span><span class="p">]</span>
<span class="go">&#39;1364156&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
<span class="go">1364156</span>
</pre></div>
</div>
<p>To download only a portion of the bytes in the object,
specify <code class="docutils literal notranslate"><span class="pre">start</span></code> and <code class="docutils literal notranslate"><span class="pre">end</span></code> byte positions (both optional):</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">download</span> <span class="o">=</span> <span class="n">Download</span><span class="p">(</span><span class="n">media_url</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">4096</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">8191</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">download</span><span class="o">.</span><span class="n">consume</span><span class="p">(</span><span class="n">transport</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">download</span><span class="o">.</span><span class="n">finished</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span>
<span class="go">&lt;Response [206]&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="sa">u</span><span class="s1">&#39;Content-Length&#39;</span><span class="p">]</span>
<span class="go">&#39;4096&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="sa">u</span><span class="s1">&#39;Content-Range&#39;</span><span class="p">]</span>
<span class="go">&#39;bytes 4096-8191/1364156&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
<span class="go">4096</span>
</pre></div>
</div>
</div>
<div class="section" id="chunked-downloads">
<h2>Chunked Downloads<a class="headerlink" href="#chunked-downloads" title="Permalink to this headline">¶</a></h2>
<p>For very large objects or objects of unknown size, it may make more sense
to download the object in chunks rather than all at once. This can be done
to avoid dropped connections with a poor internet connection or can allow
multiple chunks to be downloaded in parallel to speed up the total
download.</p>
<p>A <a class="reference internal" href="#google.resumable_media.requests.ChunkedDownload" title="google.resumable_media.requests.ChunkedDownload"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChunkedDownload</span></code></a> uses the same media URL and authorized
transport that a basic <a class="reference internal" href="#google.resumable_media.requests.Download" title="google.resumable_media.requests.Download"><code class="xref py py-class docutils literal notranslate"><span class="pre">Download</span></code></a> would use, but also
requires a chunk size and a write-able byte <code class="docutils literal notranslate"><span class="pre">stream</span></code>. The chunk size is used
to determine how much of the resouce to consume with each request and the
stream is to allow the resource to be written out (e.g. to disk) without
having to fit in memory all at once.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">google.resumable_media.requests</span> <span class="kn">import</span> <span class="n">ChunkedDownload</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chunk_size</span> <span class="o">=</span> <span class="mi">50</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span>  <span class="c1"># 50MB</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">download</span> <span class="o">=</span> <span class="n">ChunkedDownload</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">media_url</span><span class="p">,</span> <span class="n">chunk_size</span><span class="p">,</span> <span class="n">stream</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Check the state of the download before starting.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">download</span><span class="o">.</span><span class="n">bytes_downloaded</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">download</span><span class="o">.</span><span class="n">total_bytes</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">download</span><span class="o">.</span><span class="n">consume_next_chunk</span><span class="p">(</span><span class="n">transport</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Check the state of the download after consuming one chunk.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">download</span><span class="o">.</span><span class="n">finished</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">download</span><span class="o">.</span><span class="n">bytes_downloaded</span>  <span class="c1"># chunk_size</span>
<span class="go">52428800</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">download</span><span class="o">.</span><span class="n">total_bytes</span>  <span class="c1"># 1GB</span>
<span class="go">1073741824</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span>
<span class="go">&lt;Response [206]&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="sa">u</span><span class="s1">&#39;Content-Length&#39;</span><span class="p">]</span>
<span class="go">&#39;52428800&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="sa">u</span><span class="s1">&#39;Content-Range&#39;</span><span class="p">]</span>
<span class="go">&#39;bytes 0-52428799/1073741824&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">)</span> <span class="o">==</span> <span class="n">chunk_size</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">29</span><span class="p">)</span>
<span class="go">b&#39;The beginning of the chunk...&#39;</span>
</pre></div>
</div>
<p>The download will change it’s <code class="docutils literal notranslate"><span class="pre">finished</span></code> status to <a class="reference external" href="https://python.readthedocs.io/en/latest/library/constants.html#True" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">True</span></code></a>
once the final chunk is consumed. In some cases, the final chunk may
not be the same size as the other chunks:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># The state of the download in progress.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">download</span><span class="o">.</span><span class="n">finished</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">download</span><span class="o">.</span><span class="n">bytes_downloaded</span>  <span class="c1"># 20 chunks at 50MB</span>
<span class="go">1048576000</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">download</span><span class="o">.</span><span class="n">total_bytes</span>  <span class="c1"># 1GB</span>
<span class="go">1073741824</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">download</span><span class="o">.</span><span class="n">consume_next_chunk</span><span class="p">(</span><span class="n">transport</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># The state of the download after consuming the final chunk.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">download</span><span class="o">.</span><span class="n">finished</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">download</span><span class="o">.</span><span class="n">bytes_downloaded</span> <span class="o">==</span> <span class="n">download</span><span class="o">.</span><span class="n">total_bytes</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span>
<span class="go">&lt;Response [206]&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="sa">u</span><span class="s1">&#39;Content-Length&#39;</span><span class="p">]</span>
<span class="go">&#39;25165824&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="sa">u</span><span class="s1">&#39;Content-Range&#39;</span><span class="p">]</span>
<span class="go">&#39;bytes 1048576000-1073741823/1073741824&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">download</span><span class="o">.</span><span class="n">chunk_size</span>
<span class="go">True</span>
</pre></div>
</div>
<p>In addition, a <a class="reference internal" href="#google.resumable_media.requests.ChunkedDownload" title="google.resumable_media.requests.ChunkedDownload"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChunkedDownload</span></code></a> can also take optional
<code class="docutils literal notranslate"><span class="pre">start</span></code> and <code class="docutils literal notranslate"><span class="pre">end</span></code> byte positions.</p>
</div>
<div class="section" id="simple-uploads">
<h2>Simple Uploads<a class="headerlink" href="#simple-uploads" title="Permalink to this headline">¶</a></h2>
<p>Among the three supported upload classes, the simplest is
<a class="reference internal" href="#google.resumable_media.requests.SimpleUpload" title="google.resumable_media.requests.SimpleUpload"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleUpload</span></code></a>. A simple upload should be used when the resource
being uploaded is small and when there is no metadata (other than the name)
associated with the resource.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">google.resumable_media.requests</span> <span class="kn">import</span> <span class="n">SimpleUpload</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url_template</span> <span class="o">=</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="sa">u</span><span class="s1">&#39;https://www.googleapis.com/upload/storage/v1/b/</span><span class="si">{bucket}</span><span class="s1">/o?&#39;</span>
<span class="gp">... </span>    <span class="sa">u</span><span class="s1">&#39;uploadType=media&amp;&#39;</span>
<span class="gp">... </span>    <span class="sa">u</span><span class="s1">&#39;name=</span><span class="si">{blob_name}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upload_url</span> <span class="o">=</span> <span class="n">url_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">bucket</span><span class="o">=</span><span class="n">bucket</span><span class="p">,</span> <span class="n">blob_name</span><span class="o">=</span><span class="n">blob_name</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upload</span> <span class="o">=</span> <span class="n">SimpleUpload</span><span class="p">(</span><span class="n">upload_url</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;Some not too large content.&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">content_type</span> <span class="o">=</span> <span class="sa">u</span><span class="s1">&#39;text/plain&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">upload</span><span class="o">.</span><span class="n">transmit</span><span class="p">(</span><span class="n">transport</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">content_type</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upload</span><span class="o">.</span><span class="n">finished</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span>
<span class="go">&lt;Response [200]&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">json_response</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">json_response</span><span class="p">[</span><span class="sa">u</span><span class="s1">&#39;bucket&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">bucket</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">json_response</span><span class="p">[</span><span class="sa">u</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">blob_name</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">json_response</span><span class="p">[</span><span class="sa">u</span><span class="s1">&#39;contentType&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">content_type</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">json_response</span><span class="p">[</span><span class="sa">u</span><span class="s1">&#39;md5Hash&#39;</span><span class="p">]</span>
<span class="go">&#39;M0XLEsX9/sMdiI+4pB4CAQ==&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">int</span><span class="p">(</span><span class="n">json_response</span><span class="p">[</span><span class="sa">u</span><span class="s1">&#39;size&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>In the rare case that an upload fails, an <a class="reference internal" href="common.html#google.resumable_media.common.InvalidResponse" title="google.resumable_media.common.InvalidResponse"><code class="xref py py-exc docutils literal notranslate"><span class="pre">InvalidResponse</span></code></a>
will be raised:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">upload</span> <span class="o">=</span> <span class="n">SimpleUpload</span><span class="p">(</span><span class="n">upload_url</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">error</span> <span class="o">=</span> <span class="kc">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">upload</span><span class="o">.</span><span class="n">transmit</span><span class="p">(</span><span class="n">transport</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">content_type</span><span class="p">)</span>
<span class="gp">... </span><span class="k">except</span> <span class="n">resumable_media</span><span class="o">.</span><span class="n">InvalidResponse</span> <span class="k">as</span> <span class="n">caught_exc</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">error</span> <span class="o">=</span> <span class="n">caught_exc</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">error</span>
<span class="go">InvalidResponse(&#39;Request failed with status code&#39;, 503,</span>
<span class="go">                &#39;Expected one of&#39;, &lt;HTTPStatus.OK: 200&gt;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">error</span><span class="o">.</span><span class="n">response</span>
<span class="go">&lt;Response [503]&gt;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upload</span><span class="o">.</span><span class="n">finished</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Even in the case of failure, we see that the upload is
<a class="reference internal" href="#google.resumable_media.requests.SimpleUpload.finished" title="google.resumable_media.requests.SimpleUpload.finished"><code class="xref py py-attr docutils literal notranslate"><span class="pre">finished</span></code></a>, i.e. it cannot be re-used.</p>
</div>
<div class="section" id="multipart-uploads">
<h2>Multipart Uploads<a class="headerlink" href="#multipart-uploads" title="Permalink to this headline">¶</a></h2>
<p>After the simple upload, the <a class="reference internal" href="#google.resumable_media.requests.MultipartUpload" title="google.resumable_media.requests.MultipartUpload"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultipartUpload</span></code></a> can be used to
achieve essentially the same task. However, a multipart upload allows some
metadata about the resource to be sent along as well. (This is the “multi”:
we send a first part with the metadata and a second part with the actual
bytes in the resource.)</p>
<p>Usage is similar to the simple upload, but <a class="reference internal" href="#google.resumable_media.requests.MultipartUpload.transmit" title="google.resumable_media.requests.MultipartUpload.transmit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">transmit()</span></code></a>
accepts an extra required argument: <code class="docutils literal notranslate"><span class="pre">metadata</span></code>.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">google.resumable_media.requests</span> <span class="kn">import</span> <span class="n">MultipartUpload</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url_template</span> <span class="o">=</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="sa">u</span><span class="s1">&#39;https://www.googleapis.com/upload/storage/v1/b/</span><span class="si">{bucket}</span><span class="s1">/o?&#39;</span>
<span class="gp">... </span>    <span class="sa">u</span><span class="s1">&#39;uploadType=multipart&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upload_url</span> <span class="o">=</span> <span class="n">url_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">bucket</span><span class="o">=</span><span class="n">bucket</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upload</span> <span class="o">=</span> <span class="n">MultipartUpload</span><span class="p">(</span><span class="n">upload_url</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">metadata</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="sa">u</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">blob_name</span><span class="p">,</span>
<span class="gp">... </span>    <span class="sa">u</span><span class="s1">&#39;metadata&#39;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>        <span class="sa">u</span><span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;grurple&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">},</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">upload</span><span class="o">.</span><span class="n">transmit</span><span class="p">(</span><span class="n">transport</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="n">content_type</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upload</span><span class="o">.</span><span class="n">finished</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span>
<span class="go">&lt;Response [200]&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">json_response</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">json_response</span><span class="p">[</span><span class="sa">u</span><span class="s1">&#39;bucket&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">bucket</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">json_response</span><span class="p">[</span><span class="sa">u</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">blob_name</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">json_response</span><span class="p">[</span><span class="sa">u</span><span class="s1">&#39;metadata&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">metadata</span><span class="p">[</span><span class="sa">u</span><span class="s1">&#39;metadata&#39;</span><span class="p">]</span>
<span class="go">True</span>
</pre></div>
</div>
<p>As with the simple upload, in the case of failure an <a class="reference internal" href="common.html#google.resumable_media.common.InvalidResponse" title="google.resumable_media.common.InvalidResponse"><code class="xref py py-exc docutils literal notranslate"><span class="pre">InvalidResponse</span></code></a>
is raised, enclosing the <a class="reference internal" href="common.html#google.resumable_media.common.InvalidResponse.response" title="google.resumable_media.common.InvalidResponse.response"><code class="xref py py-attr docutils literal notranslate"><span class="pre">response</span></code></a> that caused
the failure and the <code class="docutils literal notranslate"><span class="pre">upload</span></code> object cannot be re-used after a failure.</p>
</div>
<div class="section" id="resumable-uploads">
<h2>Resumable Uploads<a class="headerlink" href="#resumable-uploads" title="Permalink to this headline">¶</a></h2>
<p>A <a class="reference internal" href="#google.resumable_media.requests.ResumableUpload" title="google.resumable_media.requests.ResumableUpload"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResumableUpload</span></code></a> deviates from the other two upload classes:
it transmits a resource over the course of multiple requests. This
is intended to be used in cases where:</p>
<ul class="simple">
<li><p>the size of the resource is not known (i.e. it is generated on the fly)</p></li>
<li><p>requests must be short-lived</p></li>
<li><p>the client has request <strong>size</strong> limitations</p></li>
<li><p>the resource is too large to fit into memory</p></li>
</ul>
<p>In general, a resource should be sent in a <strong>single</strong> request to avoid
latency and reduce QPS. See <a class="reference external" href="https://cloud.google.com/storage/docs/best-practices#uploading">GCS best practices</a> for more things to
consider when using a resumable upload.</p>
<p>After creating a <a class="reference internal" href="#google.resumable_media.requests.ResumableUpload" title="google.resumable_media.requests.ResumableUpload"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResumableUpload</span></code></a> instance, a
<strong>resumable upload session</strong> must be initiated to let the server know that
a series of chunked upload requests will be coming and to obtain an
<code class="docutils literal notranslate"><span class="pre">upload_id</span></code> for the session. In contrast to the other two upload classes,
<a class="reference internal" href="#google.resumable_media.requests.ResumableUpload.initiate" title="google.resumable_media.requests.ResumableUpload.initiate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">initiate()</span></code></a> takes a byte <code class="docutils literal notranslate"><span class="pre">stream</span></code> as input rather
than raw bytes as <code class="docutils literal notranslate"><span class="pre">data</span></code>. This can be a file object, a <a class="reference external" href="https://python.readthedocs.io/en/latest/library/io.html#io.BytesIO" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">BytesIO</span></code></a>
object or any other stream implementing the same interface.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">google.resumable_media.requests</span> <span class="kn">import</span> <span class="n">ResumableUpload</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url_template</span> <span class="o">=</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="sa">u</span><span class="s1">&#39;https://www.googleapis.com/upload/storage/v1/b/</span><span class="si">{bucket}</span><span class="s1">/o?&#39;</span>
<span class="gp">... </span>    <span class="sa">u</span><span class="s1">&#39;uploadType=resumable&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upload_url</span> <span class="o">=</span> <span class="n">url_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">bucket</span><span class="o">=</span><span class="n">bucket</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chunk_size</span> <span class="o">=</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span>  <span class="c1"># 1MB</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upload</span> <span class="o">=</span> <span class="n">ResumableUpload</span><span class="p">(</span><span class="n">upload_url</span><span class="p">,</span> <span class="n">chunk_size</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># The upload doesn&#39;t know how &quot;big&quot; it is until seeing a stream.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upload</span><span class="o">.</span><span class="n">total_bytes</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">metadata</span> <span class="o">=</span> <span class="p">{</span><span class="sa">u</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">blob_name</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">upload</span><span class="o">.</span><span class="n">initiate</span><span class="p">(</span><span class="n">transport</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="n">content_type</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span>
<span class="go">&lt;Response [200]&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upload</span><span class="o">.</span><span class="n">resumable_url</span> <span class="o">==</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="sa">u</span><span class="s1">&#39;Location&#39;</span><span class="p">]</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upload</span><span class="o">.</span><span class="n">total_bytes</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upload_id</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="sa">u</span><span class="s1">&#39;X-GUploader-UploadID&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upload_id</span>
<span class="go">&#39;ABCdef189XY_super_serious&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upload</span><span class="o">.</span><span class="n">resumable_url</span> <span class="o">==</span> <span class="n">upload_url</span> <span class="o">+</span> <span class="sa">u</span><span class="s1">&#39;&amp;upload_id=&#39;</span> <span class="o">+</span> <span class="n">upload_id</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Once a <a class="reference internal" href="#google.resumable_media.requests.ResumableUpload" title="google.resumable_media.requests.ResumableUpload"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResumableUpload</span></code></a> has been initiated, the resource is
transmitted in chunks until completion:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">response0</span> <span class="o">=</span> <span class="n">upload</span><span class="o">.</span><span class="n">transmit_next_chunk</span><span class="p">(</span><span class="n">transport</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response0</span>
<span class="go">&lt;Response [308]&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upload</span><span class="o">.</span><span class="n">finished</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upload</span><span class="o">.</span><span class="n">bytes_uploaded</span> <span class="o">==</span> <span class="n">upload</span><span class="o">.</span><span class="n">chunk_size</span>
<span class="go">True</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response1</span> <span class="o">=</span> <span class="n">upload</span><span class="o">.</span><span class="n">transmit_next_chunk</span><span class="p">(</span><span class="n">transport</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response1</span>
<span class="go">&lt;Response [308]&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upload</span><span class="o">.</span><span class="n">finished</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upload</span><span class="o">.</span><span class="n">bytes_uploaded</span> <span class="o">==</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">upload</span><span class="o">.</span><span class="n">chunk_size</span>
<span class="go">True</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response2</span> <span class="o">=</span> <span class="n">upload</span><span class="o">.</span><span class="n">transmit_next_chunk</span><span class="p">(</span><span class="n">transport</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response2</span>
<span class="go">&lt;Response [200]&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upload</span><span class="o">.</span><span class="n">finished</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upload</span><span class="o">.</span><span class="n">bytes_uploaded</span> <span class="o">==</span> <span class="n">upload</span><span class="o">.</span><span class="n">total_bytes</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">json_response</span> <span class="o">=</span> <span class="n">response2</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">json_response</span><span class="p">[</span><span class="sa">u</span><span class="s1">&#39;bucket&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">bucket</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">json_response</span><span class="p">[</span><span class="sa">u</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">blob_name</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="py class">
<dt id="google.resumable_media.requests.ChunkedDownload">
<em class="property">class </em><code class="sig-prename descclassname">google.resumable_media.requests.</code><code class="sig-name descname">ChunkedDownload</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">media_url</span></em>, <em class="sig-param"><span class="n">chunk_size</span></em>, <em class="sig-param"><span class="n">stream</span></em>, <em class="sig-param"><span class="n">start</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">end</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">headers</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/google/resumable_media/requests/download.html#ChunkedDownload"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.resumable_media.requests.ChunkedDownload" title="Permalink to this definition">¶</a></dt>
<dd><p>Download a resource in chunks from a Google API.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>media_url</strong> (<a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The URL containing the media to be downloaded.</p></li>
<li><p><strong>chunk_size</strong> (<a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The number of bytes to be retrieved in each
request.</p></li>
<li><p><strong>stream</strong> (<em>IO</em><em>[</em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#bytes" title="(in Python v3.7)"><em>bytes</em></a><em>]</em>) – A write-able stream (i.e. file-like object) that
will be used to concatenate chunks of the resource as they are
downloaded.</p></li>
<li><p><strong>start</strong> (<a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The first byte in a range to be downloaded. If not
provided, defaults to <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p></li>
<li><p><strong>end</strong> (<a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The last byte in a range to be downloaded. If not
provided, will download to the end of the media.</p></li>
<li><p><strong>headers</strong> (<em>Optional</em><em>[</em><em>Mapping</em><em>[</em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>]</em><em>]</em>) – Extra headers that should
be sent with each request, e.g. headers for data encryption
key headers.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="google.resumable_media.requests.ChunkedDownload.media_url">
<code class="sig-name descname">media_url</code><a class="headerlink" href="#google.resumable_media.requests.ChunkedDownload.media_url" title="Permalink to this definition">¶</a></dt>
<dd><p>The URL containing the media to be downloaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="google.resumable_media.requests.ChunkedDownload.start">
<code class="sig-name descname">start</code><a class="headerlink" href="#google.resumable_media.requests.ChunkedDownload.start" title="Permalink to this definition">¶</a></dt>
<dd><p>The first byte in a range to be downloaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[<a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#int" title="(in Python v3.7)">int</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="google.resumable_media.requests.ChunkedDownload.end">
<code class="sig-name descname">end</code><a class="headerlink" href="#google.resumable_media.requests.ChunkedDownload.end" title="Permalink to this definition">¶</a></dt>
<dd><p>The last byte in a range to be downloaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[<a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#int" title="(in Python v3.7)">int</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="google.resumable_media.requests.ChunkedDownload.chunk_size">
<code class="sig-name descname">chunk_size</code><a class="headerlink" href="#google.resumable_media.requests.ChunkedDownload.chunk_size" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of bytes to be retrieved in each request.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#int" title="(in Python v3.7)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://python.readthedocs.io/en/latest/library/exceptions.html#ValueError" title="(in Python v3.7)"><strong>ValueError</strong></a> – If <code class="docutils literal notranslate"><span class="pre">start</span></code> is negative.</p>
</dd>
</dl>
<dl class="py method">
<dt id="google.resumable_media.requests.ChunkedDownload.bytes_downloaded">
<em class="property">property </em><code class="sig-name descname">bytes_downloaded</code><a class="headerlink" href="#google.resumable_media.requests.ChunkedDownload.bytes_downloaded" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of bytes that have been downloaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#int" title="(in Python v3.7)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="google.resumable_media.requests.ChunkedDownload.consume_next_chunk">
<code class="sig-name descname">consume_next_chunk</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">transport</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">61, 60</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/google/resumable_media/requests/download.html#ChunkedDownload.consume_next_chunk"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.resumable_media.requests.ChunkedDownload.consume_next_chunk" title="Permalink to this definition">¶</a></dt>
<dd><p>Consume the next chunk of the resource to be downloaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transport</strong> (<em>Session</em>) – A <code class="docutils literal notranslate"><span class="pre">requests</span></code> object which can
make authenticated requests.</p></li>
<li><p><strong>timeout</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>, </em><em>Tuple</em><em>[</em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>, </em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>]</em><em>]</em><em>]</em>) – <p>The number of seconds to wait for the server response.
Depending on the retry strategy, a request may be repeated
several times using the same timeout each time.</p>
<p>Can also be passed as a tuple (connect_timeout, read_timeout).
See <code class="xref py py-meth docutils literal notranslate"><span class="pre">requests.Session.request()</span></code> documentation for details.</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The HTTP response returned by <code class="docutils literal notranslate"><span class="pre">transport</span></code>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Response</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://python.readthedocs.io/en/latest/library/exceptions.html#ValueError" title="(in Python v3.7)"><strong>ValueError</strong></a> – If the current download has finished.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="google.resumable_media.requests.ChunkedDownload.finished">
<em class="property">property </em><code class="sig-name descname">finished</code><a class="headerlink" href="#google.resumable_media.requests.ChunkedDownload.finished" title="Permalink to this definition">¶</a></dt>
<dd><p>Flag indicating if the download has completed.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#bool" title="(in Python v3.7)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="google.resumable_media.requests.ChunkedDownload.invalid">
<em class="property">property </em><code class="sig-name descname">invalid</code><a class="headerlink" href="#google.resumable_media.requests.ChunkedDownload.invalid" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates if the download is in an invalid state.</p>
<p>This will occur if a call to <a class="reference internal" href="#google.resumable_media.requests.ChunkedDownload.consume_next_chunk" title="google.resumable_media.requests.ChunkedDownload.consume_next_chunk"><code class="xref py py-meth docutils literal notranslate"><span class="pre">consume_next_chunk()</span></code></a> fails.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#bool" title="(in Python v3.7)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="google.resumable_media.requests.ChunkedDownload.total_bytes">
<em class="property">property </em><code class="sig-name descname">total_bytes</code><a class="headerlink" href="#google.resumable_media.requests.ChunkedDownload.total_bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>The total number of bytes to be downloaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[<a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#int" title="(in Python v3.7)">int</a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="google.resumable_media.requests.Download">
<em class="property">class </em><code class="sig-prename descclassname">google.resumable_media.requests.</code><code class="sig-name descname">Download</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">media_url</span></em>, <em class="sig-param"><span class="n">stream</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">start</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">end</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">headers</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">checksum</span><span class="o">=</span><span class="default_value">'md5'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/google/resumable_media/requests/download.html#Download"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.resumable_media.requests.Download" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper to manage downloading a resource from a Google API.</p>
<p>“Slices” of the resource can be retrieved by specifying a range
with <code class="docutils literal notranslate"><span class="pre">start</span></code> and / or <code class="docutils literal notranslate"><span class="pre">end</span></code>. However, in typical usage, neither
<code class="docutils literal notranslate"><span class="pre">start</span></code> nor <code class="docutils literal notranslate"><span class="pre">end</span></code> is expected to be provided.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>media_url</strong> (<a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The URL containing the media to be downloaded.</p></li>
<li><p><strong>stream</strong> (<em>IO</em><em>[</em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#bytes" title="(in Python v3.7)"><em>bytes</em></a><em>]</em>) – A write-able stream (i.e. file-like object) that
the downloaded resource can be written to.</p></li>
<li><p><strong>start</strong> (<a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The first byte in a range to be downloaded. If not
provided, but <code class="docutils literal notranslate"><span class="pre">end</span></code> is provided, will download from the
beginning to <code class="docutils literal notranslate"><span class="pre">end</span></code> of the media.</p></li>
<li><p><strong>end</strong> (<a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The last byte in a range to be downloaded. If not
provided, but <code class="docutils literal notranslate"><span class="pre">start</span></code> is provided, will download from the
<code class="docutils literal notranslate"><span class="pre">start</span></code> to the end of the media.</p></li>
<li><p><strong>headers</strong> (<em>Optional</em><em>[</em><em>Mapping</em><em>[</em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>]</em><em>]</em>) – Extra headers that should
be sent with the request, e.g. headers for encrypted data.</p></li>
<li><p><strong>Optional</strong> (<em>checksum</em>) – The type of checksum to compute to verify
the integrity of the object. The response headers must contain
a checksum of the requested type. If the headers lack an
appropriate checksum (for instance in the case of transcoded or
ranged downloads where the remote service does not know the
correct checksum) an INFO-level log will be emitted. Supported
values are “md5”, “crc32c” and None. The default is “md5”.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="google.resumable_media.requests.Download.media_url">
<code class="sig-name descname">media_url</code><a class="headerlink" href="#google.resumable_media.requests.Download.media_url" title="Permalink to this definition">¶</a></dt>
<dd><p>The URL containing the media to be downloaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="google.resumable_media.requests.Download.start">
<code class="sig-name descname">start</code><a class="headerlink" href="#google.resumable_media.requests.Download.start" title="Permalink to this definition">¶</a></dt>
<dd><p>The first byte in a range to be downloaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[<a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#int" title="(in Python v3.7)">int</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="google.resumable_media.requests.Download.end">
<code class="sig-name descname">end</code><a class="headerlink" href="#google.resumable_media.requests.Download.end" title="Permalink to this definition">¶</a></dt>
<dd><p>The last byte in a range to be downloaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[<a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#int" title="(in Python v3.7)">int</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="google.resumable_media.requests.Download.consume">
<code class="sig-name descname">consume</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">transport</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">61, 60</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/google/resumable_media/requests/download.html#Download.consume"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.resumable_media.requests.Download.consume" title="Permalink to this definition">¶</a></dt>
<dd><p>Consume the resource to be downloaded.</p>
<p>If a <code class="docutils literal notranslate"><span class="pre">stream</span></code> is attached to this download, then the downloaded
resource will be written to the stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transport</strong> (<em>Session</em>) – A <code class="docutils literal notranslate"><span class="pre">requests</span></code> object which can
make authenticated requests.</p></li>
<li><p><strong>timeout</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>, </em><em>Tuple</em><em>[</em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>, </em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>]</em><em>]</em><em>]</em>) – <p>The number of seconds to wait for the server response.
Depending on the retry strategy, a request may be repeated
several times using the same timeout each time.</p>
<p>Can also be passed as a tuple (connect_timeout, read_timeout).
See <code class="xref py py-meth docutils literal notranslate"><span class="pre">requests.Session.request()</span></code> documentation for details.</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The HTTP response returned by <code class="docutils literal notranslate"><span class="pre">transport</span></code>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Response</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="common.html#google.resumable_media.common.DataCorruption" title="google.resumable_media.common.DataCorruption"><strong>DataCorruption</strong></a> – If the download’s
    checksum doesn’t agree with server-computed checksum.</p></li>
<li><p><a class="reference external" href="https://python.readthedocs.io/en/latest/library/exceptions.html#ValueError" title="(in Python v3.7)"><strong>ValueError</strong></a> – If the current <a class="reference internal" href="#google.resumable_media.requests.Download" title="google.resumable_media.requests.Download"><code class="xref py py-class docutils literal notranslate"><span class="pre">Download</span></code></a> has already
    finished.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="google.resumable_media.requests.Download.finished">
<em class="property">property </em><code class="sig-name descname">finished</code><a class="headerlink" href="#google.resumable_media.requests.Download.finished" title="Permalink to this definition">¶</a></dt>
<dd><p>Flag indicating if the download has completed.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#bool" title="(in Python v3.7)">bool</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="google.resumable_media.requests.MultipartUpload">
<em class="property">class </em><code class="sig-prename descclassname">google.resumable_media.requests.</code><code class="sig-name descname">MultipartUpload</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">upload_url</span></em>, <em class="sig-param"><span class="n">headers</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">checksum</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/google/resumable_media/requests/upload.html#MultipartUpload"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.resumable_media.requests.MultipartUpload" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload a resource with metadata to a Google API.</p>
<p>A <strong>multipart</strong> upload sends both metadata and the resource in a single
(multipart) request.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>upload_url</strong> (<a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The URL where the content will be uploaded.</p></li>
<li><p><strong>headers</strong> (<em>Optional</em><em>[</em><em>Mapping</em><em>[</em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>]</em><em>]</em>) – Extra headers that should
be sent with the request, e.g. headers for encrypted data.</p></li>
<li><p><strong>Optional</strong> (<em>checksum</em>) – The type of checksum to compute to verify
the integrity of the object. The request metadata will be amended
to include the computed value. Using this option will override a
manually-set checksum value. Supported values are “md5”,
“crc32c” and None. The default is None.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="google.resumable_media.requests.MultipartUpload.upload_url">
<code class="sig-name descname">upload_url</code><a class="headerlink" href="#google.resumable_media.requests.MultipartUpload.upload_url" title="Permalink to this definition">¶</a></dt>
<dd><p>The URL where the content will be uploaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="google.resumable_media.requests.MultipartUpload.finished">
<em class="property">property </em><code class="sig-name descname">finished</code><a class="headerlink" href="#google.resumable_media.requests.MultipartUpload.finished" title="Permalink to this definition">¶</a></dt>
<dd><p>Flag indicating if the upload has completed.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#bool" title="(in Python v3.7)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="google.resumable_media.requests.MultipartUpload.transmit">
<code class="sig-name descname">transmit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">transport</span></em>, <em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">metadata</span></em>, <em class="sig-param"><span class="n">content_type</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">61, 60</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/google/resumable_media/requests/upload.html#MultipartUpload.transmit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.resumable_media.requests.MultipartUpload.transmit" title="Permalink to this definition">¶</a></dt>
<dd><p>Transmit the resource to be uploaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transport</strong> (<em>Session</em>) – A <code class="docutils literal notranslate"><span class="pre">requests</span></code> object which can
make authenticated requests.</p></li>
<li><p><strong>data</strong> (<a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#bytes" title="(in Python v3.7)"><em>bytes</em></a>) – The resource content to be uploaded.</p></li>
<li><p><strong>metadata</strong> (<em>Mapping</em><em>[</em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>]</em>) – The resource metadata, such as an
ACL list.</p></li>
<li><p><strong>content_type</strong> (<a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The content type of the resource, e.g. a JPEG
image has content type <code class="docutils literal notranslate"><span class="pre">image/jpeg</span></code>.</p></li>
<li><p><strong>timeout</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>, </em><em>Tuple</em><em>[</em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>, </em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>]</em><em>]</em><em>]</em>) – <p>The number of seconds to wait for the server response.
Depending on the retry strategy, a request may be repeated
several times using the same timeout each time.</p>
<p>Can also be passed as a tuple (connect_timeout, read_timeout).
See <code class="xref py py-meth docutils literal notranslate"><span class="pre">requests.Session.request()</span></code> documentation for details.</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The HTTP response returned by <code class="docutils literal notranslate"><span class="pre">transport</span></code>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Response</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="google.resumable_media.requests.RawChunkedDownload">
<em class="property">class </em><code class="sig-prename descclassname">google.resumable_media.requests.</code><code class="sig-name descname">RawChunkedDownload</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">media_url</span></em>, <em class="sig-param"><span class="n">chunk_size</span></em>, <em class="sig-param"><span class="n">stream</span></em>, <em class="sig-param"><span class="n">start</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">end</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">headers</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/google/resumable_media/requests/download.html#RawChunkedDownload"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.resumable_media.requests.RawChunkedDownload" title="Permalink to this definition">¶</a></dt>
<dd><p>Download a raw resource in chunks from a Google API.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>media_url</strong> (<a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The URL containing the media to be downloaded.</p></li>
<li><p><strong>chunk_size</strong> (<a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The number of bytes to be retrieved in each
request.</p></li>
<li><p><strong>stream</strong> (<em>IO</em><em>[</em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#bytes" title="(in Python v3.7)"><em>bytes</em></a><em>]</em>) – A write-able stream (i.e. file-like object) that
will be used to concatenate chunks of the resource as they are
downloaded.</p></li>
<li><p><strong>start</strong> (<a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The first byte in a range to be downloaded. If not
provided, defaults to <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p></li>
<li><p><strong>end</strong> (<a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The last byte in a range to be downloaded. If not
provided, will download to the end of the media.</p></li>
<li><p><strong>headers</strong> (<em>Optional</em><em>[</em><em>Mapping</em><em>[</em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>]</em><em>]</em>) – Extra headers that should
be sent with each request, e.g. headers for data encryption
key headers.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="google.resumable_media.requests.RawChunkedDownload.media_url">
<code class="sig-name descname">media_url</code><a class="headerlink" href="#google.resumable_media.requests.RawChunkedDownload.media_url" title="Permalink to this definition">¶</a></dt>
<dd><p>The URL containing the media to be downloaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="google.resumable_media.requests.RawChunkedDownload.start">
<code class="sig-name descname">start</code><a class="headerlink" href="#google.resumable_media.requests.RawChunkedDownload.start" title="Permalink to this definition">¶</a></dt>
<dd><p>The first byte in a range to be downloaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[<a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#int" title="(in Python v3.7)">int</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="google.resumable_media.requests.RawChunkedDownload.end">
<code class="sig-name descname">end</code><a class="headerlink" href="#google.resumable_media.requests.RawChunkedDownload.end" title="Permalink to this definition">¶</a></dt>
<dd><p>The last byte in a range to be downloaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[<a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#int" title="(in Python v3.7)">int</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="google.resumable_media.requests.RawChunkedDownload.chunk_size">
<code class="sig-name descname">chunk_size</code><a class="headerlink" href="#google.resumable_media.requests.RawChunkedDownload.chunk_size" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of bytes to be retrieved in each request.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#int" title="(in Python v3.7)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://python.readthedocs.io/en/latest/library/exceptions.html#ValueError" title="(in Python v3.7)"><strong>ValueError</strong></a> – If <code class="docutils literal notranslate"><span class="pre">start</span></code> is negative.</p>
</dd>
</dl>
<dl class="py method">
<dt id="google.resumable_media.requests.RawChunkedDownload.bytes_downloaded">
<em class="property">property </em><code class="sig-name descname">bytes_downloaded</code><a class="headerlink" href="#google.resumable_media.requests.RawChunkedDownload.bytes_downloaded" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of bytes that have been downloaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#int" title="(in Python v3.7)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="google.resumable_media.requests.RawChunkedDownload.consume_next_chunk">
<code class="sig-name descname">consume_next_chunk</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">transport</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">61, 60</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/google/resumable_media/requests/download.html#RawChunkedDownload.consume_next_chunk"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.resumable_media.requests.RawChunkedDownload.consume_next_chunk" title="Permalink to this definition">¶</a></dt>
<dd><p>Consume the next chunk of the resource to be downloaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transport</strong> (<em>Session</em>) – A <code class="docutils literal notranslate"><span class="pre">requests</span></code> object which can
make authenticated requests.</p></li>
<li><p><strong>timeout</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>, </em><em>Tuple</em><em>[</em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>, </em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>]</em><em>]</em><em>]</em>) – <p>The number of seconds to wait for the server response.
Depending on the retry strategy, a request may be repeated
several times using the same timeout each time.</p>
<p>Can also be passed as a tuple (connect_timeout, read_timeout).
See <code class="xref py py-meth docutils literal notranslate"><span class="pre">requests.Session.request()</span></code> documentation for details.</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The HTTP response returned by <code class="docutils literal notranslate"><span class="pre">transport</span></code>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Response</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://python.readthedocs.io/en/latest/library/exceptions.html#ValueError" title="(in Python v3.7)"><strong>ValueError</strong></a> – If the current download has finished.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="google.resumable_media.requests.RawChunkedDownload.finished">
<em class="property">property </em><code class="sig-name descname">finished</code><a class="headerlink" href="#google.resumable_media.requests.RawChunkedDownload.finished" title="Permalink to this definition">¶</a></dt>
<dd><p>Flag indicating if the download has completed.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#bool" title="(in Python v3.7)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="google.resumable_media.requests.RawChunkedDownload.invalid">
<em class="property">property </em><code class="sig-name descname">invalid</code><a class="headerlink" href="#google.resumable_media.requests.RawChunkedDownload.invalid" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates if the download is in an invalid state.</p>
<p>This will occur if a call to <a class="reference internal" href="#google.resumable_media.requests.RawChunkedDownload.consume_next_chunk" title="google.resumable_media.requests.RawChunkedDownload.consume_next_chunk"><code class="xref py py-meth docutils literal notranslate"><span class="pre">consume_next_chunk()</span></code></a> fails.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#bool" title="(in Python v3.7)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="google.resumable_media.requests.RawChunkedDownload.total_bytes">
<em class="property">property </em><code class="sig-name descname">total_bytes</code><a class="headerlink" href="#google.resumable_media.requests.RawChunkedDownload.total_bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>The total number of bytes to be downloaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[<a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#int" title="(in Python v3.7)">int</a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="google.resumable_media.requests.RawDownload">
<em class="property">class </em><code class="sig-prename descclassname">google.resumable_media.requests.</code><code class="sig-name descname">RawDownload</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">media_url</span></em>, <em class="sig-param"><span class="n">stream</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">start</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">end</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">headers</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">checksum</span><span class="o">=</span><span class="default_value">'md5'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/google/resumable_media/requests/download.html#RawDownload"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.resumable_media.requests.RawDownload" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper to manage downloading a raw resource from a Google API.</p>
<p>“Slices” of the resource can be retrieved by specifying a range
with <code class="docutils literal notranslate"><span class="pre">start</span></code> and / or <code class="docutils literal notranslate"><span class="pre">end</span></code>. However, in typical usage, neither
<code class="docutils literal notranslate"><span class="pre">start</span></code> nor <code class="docutils literal notranslate"><span class="pre">end</span></code> is expected to be provided.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>media_url</strong> (<a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The URL containing the media to be downloaded.</p></li>
<li><p><strong>stream</strong> (<em>IO</em><em>[</em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#bytes" title="(in Python v3.7)"><em>bytes</em></a><em>]</em>) – A write-able stream (i.e. file-like object) that
the downloaded resource can be written to.</p></li>
<li><p><strong>start</strong> (<a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The first byte in a range to be downloaded. If not
provided, but <code class="docutils literal notranslate"><span class="pre">end</span></code> is provided, will download from the
beginning to <code class="docutils literal notranslate"><span class="pre">end</span></code> of the media.</p></li>
<li><p><strong>end</strong> (<a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The last byte in a range to be downloaded. If not
provided, but <code class="docutils literal notranslate"><span class="pre">start</span></code> is provided, will download from the
<code class="docutils literal notranslate"><span class="pre">start</span></code> to the end of the media.</p></li>
<li><p><strong>headers</strong> (<em>Optional</em><em>[</em><em>Mapping</em><em>[</em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>]</em><em>]</em>) – Extra headers that should
be sent with the request, e.g. headers for encrypted data.</p></li>
<li><p><strong>Optional</strong> (<em>checksum</em>) – The type of checksum to compute to verify
the integrity of the object. The response headers must contain
a checksum of the requested type. If the headers lack an
appropriate checksum (for instance in the case of transcoded or
ranged downloads where the remote service does not know the
correct checksum) an INFO-level log will be emitted. Supported
values are “md5”, “crc32c” and None. The default is “md5”.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="google.resumable_media.requests.RawDownload.media_url">
<code class="sig-name descname">media_url</code><a class="headerlink" href="#google.resumable_media.requests.RawDownload.media_url" title="Permalink to this definition">¶</a></dt>
<dd><p>The URL containing the media to be downloaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="google.resumable_media.requests.RawDownload.start">
<code class="sig-name descname">start</code><a class="headerlink" href="#google.resumable_media.requests.RawDownload.start" title="Permalink to this definition">¶</a></dt>
<dd><p>The first byte in a range to be downloaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[<a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#int" title="(in Python v3.7)">int</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="google.resumable_media.requests.RawDownload.end">
<code class="sig-name descname">end</code><a class="headerlink" href="#google.resumable_media.requests.RawDownload.end" title="Permalink to this definition">¶</a></dt>
<dd><p>The last byte in a range to be downloaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[<a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#int" title="(in Python v3.7)">int</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="google.resumable_media.requests.RawDownload.consume">
<code class="sig-name descname">consume</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">transport</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">61, 60</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/google/resumable_media/requests/download.html#RawDownload.consume"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.resumable_media.requests.RawDownload.consume" title="Permalink to this definition">¶</a></dt>
<dd><p>Consume the resource to be downloaded.</p>
<p>If a <code class="docutils literal notranslate"><span class="pre">stream</span></code> is attached to this download, then the downloaded
resource will be written to the stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transport</strong> (<em>Session</em>) – A <code class="docutils literal notranslate"><span class="pre">requests</span></code> object which can
make authenticated requests.</p></li>
<li><p><strong>timeout</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>, </em><em>Tuple</em><em>[</em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>, </em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>]</em><em>]</em><em>]</em>) – <p>The number of seconds to wait for the server response.
Depending on the retry strategy, a request may be repeated
several times using the same timeout each time.</p>
<p>Can also be passed as a tuple (connect_timeout, read_timeout).
See <code class="xref py py-meth docutils literal notranslate"><span class="pre">requests.Session.request()</span></code> documentation for details.</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The HTTP response returned by <code class="docutils literal notranslate"><span class="pre">transport</span></code>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Response</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="common.html#google.resumable_media.common.DataCorruption" title="google.resumable_media.common.DataCorruption"><strong>DataCorruption</strong></a> – If the download’s
    checksum doesn’t agree with server-computed checksum.</p></li>
<li><p><a class="reference external" href="https://python.readthedocs.io/en/latest/library/exceptions.html#ValueError" title="(in Python v3.7)"><strong>ValueError</strong></a> – If the current <a class="reference internal" href="#google.resumable_media.requests.Download" title="google.resumable_media.requests.Download"><code class="xref py py-class docutils literal notranslate"><span class="pre">Download</span></code></a> has already
    finished.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="google.resumable_media.requests.RawDownload.finished">
<em class="property">property </em><code class="sig-name descname">finished</code><a class="headerlink" href="#google.resumable_media.requests.RawDownload.finished" title="Permalink to this definition">¶</a></dt>
<dd><p>Flag indicating if the download has completed.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#bool" title="(in Python v3.7)">bool</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="google.resumable_media.requests.ResumableUpload">
<em class="property">class </em><code class="sig-prename descclassname">google.resumable_media.requests.</code><code class="sig-name descname">ResumableUpload</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">upload_url</span></em>, <em class="sig-param"><span class="n">chunk_size</span></em>, <em class="sig-param"><span class="n">checksum</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">headers</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/google/resumable_media/requests/upload.html#ResumableUpload"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.resumable_media.requests.ResumableUpload" title="Permalink to this definition">¶</a></dt>
<dd><p>Initiate and fulfill a resumable upload to a Google API.</p>
<p>A <strong>resumable</strong> upload sends an initial request with the resource metadata
and then gets assigned an upload ID / upload URL to send bytes to.
Using the upload URL, the upload is then done in chunks (determined by
the user) until all bytes have been uploaded.</p>
<p>When constructing a resumable upload, only the resumable upload URL and
the chunk size are required:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">google.resumable_media.requests</span> <span class="kn">import</span> <span class="n">ResumableUpload</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url_template</span> <span class="o">=</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="sa">u</span><span class="s1">&#39;https://www.googleapis.com/upload/storage/v1/b/</span><span class="si">{bucket}</span><span class="s1">/o?&#39;</span>
<span class="gp">... </span>    <span class="sa">u</span><span class="s1">&#39;uploadType=resumable&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upload_url</span> <span class="o">=</span> <span class="n">url_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">bucket</span><span class="o">=</span><span class="n">bucket</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chunk_size</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span>  <span class="c1"># 3MB</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upload</span> <span class="o">=</span> <span class="n">ResumableUpload</span><span class="p">(</span><span class="n">upload_url</span><span class="p">,</span> <span class="n">chunk_size</span><span class="p">)</span>
</pre></div>
</div>
<p>When initiating an upload (via <a class="reference internal" href="#google.resumable_media.requests.ResumableUpload.initiate" title="google.resumable_media.requests.ResumableUpload.initiate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">initiate()</span></code></a>), the caller is expected
to pass the resource being uploaded as a file-like <code class="docutils literal notranslate"><span class="pre">stream</span></code>. If the size
of the resource is explicitly known, it can be passed in directly:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upload</span><span class="o">.</span><span class="n">total_bytes</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="go">True</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;rb&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">total_bytes</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">metadata</span> <span class="o">=</span> <span class="p">{</span><span class="sa">u</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">filename</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">upload</span><span class="o">.</span><span class="n">initiate</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">transport</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="sa">u</span><span class="s1">&#39;text/plain&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">total_bytes</span><span class="o">=</span><span class="n">total_bytes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span>
<span class="go">&lt;Response [200]&gt;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upload</span><span class="o">.</span><span class="n">total_bytes</span> <span class="o">==</span> <span class="n">total_bytes</span>
<span class="go">True</span>
</pre></div>
</div>
<p>If the stream is in a “final” state (i.e. it won’t have any more bytes
written to it), the total number of bytes can be determined implicitly
from the <code class="docutils literal notranslate"><span class="pre">stream</span></code> itself:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stream</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">upload</span><span class="o">.</span><span class="n">initiate</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">transport</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="n">content_type</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upload</span><span class="o">.</span><span class="n">total_bytes</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>If the size of the resource is <strong>unknown</strong> when the upload is initiated,
the <code class="docutils literal notranslate"><span class="pre">stream_final</span></code> argument can be used. This might occur if the
resource is being dynamically created on the client (e.g. application
logs). To use this argument:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">upload</span><span class="o">.</span><span class="n">initiate</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">transport</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="n">content_type</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">stream_final</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upload</span><span class="o">.</span><span class="n">total_bytes</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>upload_url</strong> (<a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The URL where the resumable upload will be initiated.</p></li>
<li><p><strong>chunk_size</strong> (<a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The size of each chunk used to upload the resource.</p></li>
<li><p><strong>headers</strong> (<em>Optional</em><em>[</em><em>Mapping</em><em>[</em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>]</em><em>]</em>) – Extra headers that should
be sent with the <a class="reference internal" href="#google.resumable_media.requests.ResumableUpload.initiate" title="google.resumable_media.requests.ResumableUpload.initiate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">initiate()</span></code></a> request, e.g. headers for
encrypted data. These <strong>will not</strong> be sent with
<a class="reference internal" href="#google.resumable_media.requests.ResumableUpload.transmit_next_chunk" title="google.resumable_media.requests.ResumableUpload.transmit_next_chunk"><code class="xref py py-meth docutils literal notranslate"><span class="pre">transmit_next_chunk()</span></code></a> or <a class="reference internal" href="#google.resumable_media.requests.ResumableUpload.recover" title="google.resumable_media.requests.ResumableUpload.recover"><code class="xref py py-meth docutils literal notranslate"><span class="pre">recover()</span></code></a> requests.</p></li>
<li><p><strong>Optional</strong> (<em>checksum</em>) – The type of checksum to compute to verify
the integrity of the object. After the upload is complete, the
server-computed checksum of the resulting object will be checked
and google.resumable_media.common.DataCorruption will be raised on
a mismatch. The corrupted file will not be deleted from the remote
host automatically. Supported values are “md5”, “crc32c” and None.
The default is None.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="google.resumable_media.requests.ResumableUpload.upload_url">
<code class="sig-name descname">upload_url</code><a class="headerlink" href="#google.resumable_media.requests.ResumableUpload.upload_url" title="Permalink to this definition">¶</a></dt>
<dd><p>The URL where the content will be uploaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://python.readthedocs.io/en/latest/library/exceptions.html#ValueError" title="(in Python v3.7)"><strong>ValueError</strong></a> – If <code class="docutils literal notranslate"><span class="pre">chunk_size</span></code> is not a multiple of
    <a class="reference internal" href="common.html#google.resumable_media.common.UPLOAD_CHUNK_SIZE" title="google.resumable_media.common.UPLOAD_CHUNK_SIZE"><code class="xref py py-data docutils literal notranslate"><span class="pre">UPLOAD_CHUNK_SIZE</span></code></a>.</p>
</dd>
</dl>
<dl class="py method">
<dt id="google.resumable_media.requests.ResumableUpload.bytes_uploaded">
<em class="property">property </em><code class="sig-name descname">bytes_uploaded</code><a class="headerlink" href="#google.resumable_media.requests.ResumableUpload.bytes_uploaded" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of bytes that have been uploaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#int" title="(in Python v3.7)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="google.resumable_media.requests.ResumableUpload.chunk_size">
<em class="property">property </em><code class="sig-name descname">chunk_size</code><a class="headerlink" href="#google.resumable_media.requests.ResumableUpload.chunk_size" title="Permalink to this definition">¶</a></dt>
<dd><p>The size of each chunk used to upload the resource.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#int" title="(in Python v3.7)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="google.resumable_media.requests.ResumableUpload.finished">
<em class="property">property </em><code class="sig-name descname">finished</code><a class="headerlink" href="#google.resumable_media.requests.ResumableUpload.finished" title="Permalink to this definition">¶</a></dt>
<dd><p>Flag indicating if the upload has completed.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#bool" title="(in Python v3.7)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="google.resumable_media.requests.ResumableUpload.initiate">
<code class="sig-name descname">initiate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">transport</span></em>, <em class="sig-param"><span class="n">stream</span></em>, <em class="sig-param"><span class="n">metadata</span></em>, <em class="sig-param"><span class="n">content_type</span></em>, <em class="sig-param"><span class="n">total_bytes</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stream_final</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">61, 60</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/google/resumable_media/requests/upload.html#ResumableUpload.initiate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.resumable_media.requests.ResumableUpload.initiate" title="Permalink to this definition">¶</a></dt>
<dd><p>Initiate a resumable upload.</p>
<p>By default, this method assumes your <code class="docutils literal notranslate"><span class="pre">stream</span></code> is in a “final”
state ready to transmit. However, <code class="docutils literal notranslate"><span class="pre">stream_final=False</span></code> can be used
to indicate that the size of the resource is not known. This can happen
if bytes are being dynamically fed into <code class="docutils literal notranslate"><span class="pre">stream</span></code>, e.g. if the stream
is attached to application logs.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">stream_final=False</span></code> is used, <a class="reference internal" href="#google.resumable_media.requests.ResumableUpload.chunk_size" title="google.resumable_media.requests.ResumableUpload.chunk_size"><code class="xref py py-attr docutils literal notranslate"><span class="pre">chunk_size</span></code></a> bytes will be
read from the stream every time <a class="reference internal" href="#google.resumable_media.requests.ResumableUpload.transmit_next_chunk" title="google.resumable_media.requests.ResumableUpload.transmit_next_chunk"><code class="xref py py-meth docutils literal notranslate"><span class="pre">transmit_next_chunk()</span></code></a> is called.
If one of those reads produces strictly fewer bites than the chunk
size, the upload will be concluded.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transport</strong> (<em>Session</em>) – A <code class="docutils literal notranslate"><span class="pre">requests</span></code> object which can
make authenticated requests.</p></li>
<li><p><strong>stream</strong> (<em>IO</em><em>[</em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#bytes" title="(in Python v3.7)"><em>bytes</em></a><em>]</em>) – The stream (i.e. file-like object) that will
be uploaded. The stream <strong>must</strong> be at the beginning (i.e.
<code class="docutils literal notranslate"><span class="pre">stream.tell()</span> <span class="pre">==</span> <span class="pre">0</span></code>).</p></li>
<li><p><strong>metadata</strong> (<em>Mapping</em><em>[</em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>]</em>) – The resource metadata, such as an
ACL list.</p></li>
<li><p><strong>content_type</strong> (<a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The content type of the resource, e.g. a JPEG
image has content type <code class="docutils literal notranslate"><span class="pre">image/jpeg</span></code>.</p></li>
<li><p><strong>total_bytes</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – The total number of bytes to be
uploaded. If specified, the upload size <strong>will not</strong> be
determined from the stream (even if <code class="docutils literal notranslate"><span class="pre">stream_final=True</span></code>).</p></li>
<li><p><strong>stream_final</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a><em>]</em>) – Indicates if the <code class="docutils literal notranslate"><span class="pre">stream</span></code> is
“final” (i.e. no more bytes will be added to it). In this case
we determine the upload size from the size of the stream. If
<code class="docutils literal notranslate"><span class="pre">total_bytes</span></code> is passed, this argument will be ignored.</p></li>
<li><p><strong>timeout</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>, </em><em>Tuple</em><em>[</em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>, </em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>]</em><em>]</em><em>]</em>) – <p>The number of seconds to wait for the server response.
Depending on the retry strategy, a request may be repeated
several times using the same timeout each time.</p>
<p>Can also be passed as a tuple (connect_timeout, read_timeout).
See <code class="xref py py-meth docutils literal notranslate"><span class="pre">requests.Session.request()</span></code> documentation for details.</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The HTTP response returned by <code class="docutils literal notranslate"><span class="pre">transport</span></code>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Response</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="google.resumable_media.requests.ResumableUpload.invalid">
<em class="property">property </em><code class="sig-name descname">invalid</code><a class="headerlink" href="#google.resumable_media.requests.ResumableUpload.invalid" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates if the upload is in an invalid state.</p>
<p>This will occur if a call to <a class="reference internal" href="#google.resumable_media.requests.ResumableUpload.transmit_next_chunk" title="google.resumable_media.requests.ResumableUpload.transmit_next_chunk"><code class="xref py py-meth docutils literal notranslate"><span class="pre">transmit_next_chunk()</span></code></a> fails.
To recover from such a failure, call <a class="reference internal" href="#google.resumable_media.requests.ResumableUpload.recover" title="google.resumable_media.requests.ResumableUpload.recover"><code class="xref py py-meth docutils literal notranslate"><span class="pre">recover()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#bool" title="(in Python v3.7)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="google.resumable_media.requests.ResumableUpload.recover">
<code class="sig-name descname">recover</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">transport</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/google/resumable_media/requests/upload.html#ResumableUpload.recover"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.resumable_media.requests.ResumableUpload.recover" title="Permalink to this definition">¶</a></dt>
<dd><p>Recover from a failure.</p>
<p>This method should be used when a <a class="reference internal" href="#google.resumable_media.requests.ResumableUpload" title="google.resumable_media.requests.ResumableUpload"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResumableUpload</span></code></a> is in an
<a class="reference internal" href="#google.resumable_media.requests.ResumableUpload.invalid" title="google.resumable_media.requests.ResumableUpload.invalid"><code class="xref py py-attr docutils literal notranslate"><span class="pre">invalid</span></code></a> state due to a request failure.</p>
<p>This will verify the progress with the server and make sure the
current upload is in a valid state before <a class="reference internal" href="#google.resumable_media.requests.ResumableUpload.transmit_next_chunk" title="google.resumable_media.requests.ResumableUpload.transmit_next_chunk"><code class="xref py py-meth docutils literal notranslate"><span class="pre">transmit_next_chunk()</span></code></a>
can be used again.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>transport</strong> (<em>Session</em>) – A <code class="docutils literal notranslate"><span class="pre">requests</span></code> object which can
make authenticated requests.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The HTTP response returned by <code class="docutils literal notranslate"><span class="pre">transport</span></code>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Response</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="google.resumable_media.requests.ResumableUpload.resumable_url">
<em class="property">property </em><code class="sig-name descname">resumable_url</code><a class="headerlink" href="#google.resumable_media.requests.ResumableUpload.resumable_url" title="Permalink to this definition">¶</a></dt>
<dd><p>The URL of the in-progress resumable upload.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[<a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)">str</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="google.resumable_media.requests.ResumableUpload.total_bytes">
<em class="property">property </em><code class="sig-name descname">total_bytes</code><a class="headerlink" href="#google.resumable_media.requests.ResumableUpload.total_bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>The total number of bytes to be uploaded.</p>
<p>If this upload is initiated (via <a class="reference internal" href="#google.resumable_media.requests.ResumableUpload.initiate" title="google.resumable_media.requests.ResumableUpload.initiate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">initiate()</span></code></a>) with
<code class="docutils literal notranslate"><span class="pre">stream_final=True</span></code>, this value will be populated based on the size
of the <code class="docutils literal notranslate"><span class="pre">stream</span></code> being uploaded. (By default <code class="docutils literal notranslate"><span class="pre">stream_final=True</span></code>.)</p>
<p>If this upload is initiated with <code class="docutils literal notranslate"><span class="pre">stream_final=False</span></code>,
<a class="reference internal" href="#google.resumable_media.requests.ResumableUpload.total_bytes" title="google.resumable_media.requests.ResumableUpload.total_bytes"><code class="xref py py-attr docutils literal notranslate"><span class="pre">total_bytes</span></code></a> will be <a class="reference external" href="https://python.readthedocs.io/en/latest/library/constants.html#None" title="(in Python v3.7)"><code class="xref py py-data docutils literal notranslate"><span class="pre">None</span></code></a> since it cannot be
determined from the stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[<a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#int" title="(in Python v3.7)">int</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="google.resumable_media.requests.ResumableUpload.transmit_next_chunk">
<code class="sig-name descname">transmit_next_chunk</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">transport</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">61, 60</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/google/resumable_media/requests/upload.html#ResumableUpload.transmit_next_chunk"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.resumable_media.requests.ResumableUpload.transmit_next_chunk" title="Permalink to this definition">¶</a></dt>
<dd><p>Transmit the next chunk of the resource to be uploaded.</p>
<p>If the current upload was initiated with <code class="docutils literal notranslate"><span class="pre">stream_final=False</span></code>,
this method will dynamically determine if the upload has completed.
The upload will be considered complete if the stream produces
fewer than <a class="reference internal" href="#google.resumable_media.requests.ResumableUpload.chunk_size" title="google.resumable_media.requests.ResumableUpload.chunk_size"><code class="xref py py-attr docutils literal notranslate"><span class="pre">chunk_size</span></code></a> bytes when a chunk is read from it.</p>
<p>In the case of failure, an exception is thrown that preserves the
failed response:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">error</span> <span class="o">=</span> <span class="kc">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">upload</span><span class="o">.</span><span class="n">transmit_next_chunk</span><span class="p">(</span><span class="n">transport</span><span class="p">)</span>
<span class="gp">... </span><span class="k">except</span> <span class="n">resumable_media</span><span class="o">.</span><span class="n">InvalidResponse</span> <span class="k">as</span> <span class="n">caught_exc</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">error</span> <span class="o">=</span> <span class="n">caught_exc</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">error</span>
<span class="go">InvalidResponse(&#39;Request failed with status code&#39;, 400,</span>
<span class="go">                &#39;Expected one of&#39;, &lt;HTTPStatus.OK: 200&gt;, 308)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">error</span><span class="o">.</span><span class="n">response</span>
<span class="go">&lt;Response [400]&gt;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transport</strong> (<em>Session</em>) – A <code class="docutils literal notranslate"><span class="pre">requests</span></code> object which can
make authenticated requests.</p></li>
<li><p><strong>timeout</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>, </em><em>Tuple</em><em>[</em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>, </em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>]</em><em>]</em><em>]</em>) – <p>The number of seconds to wait for the server response.
Depending on the retry strategy, a request may be repeated
several times using the same timeout each time.</p>
<p>Can also be passed as a tuple (connect_timeout, read_timeout).
See <code class="xref py py-meth docutils literal notranslate"><span class="pre">requests.Session.request()</span></code> documentation for details.</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The HTTP response returned by <code class="docutils literal notranslate"><span class="pre">transport</span></code>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Response</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="common.html#google.resumable_media.common.InvalidResponse" title="google.resumable_media.common.InvalidResponse"><strong>InvalidResponse</strong></a> – If the status
    code is not 200 or 308.</p></li>
<li><p><a class="reference internal" href="common.html#google.resumable_media.common.DataCorruption" title="google.resumable_media.common.DataCorruption"><strong>DataCorruption</strong></a> – If this is the final
    chunk, a checksum validation was requested, and the checksum
    does not match or is not available.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="google.resumable_media.requests.SimpleUpload">
<em class="property">class </em><code class="sig-prename descclassname">google.resumable_media.requests.</code><code class="sig-name descname">SimpleUpload</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">upload_url</span></em>, <em class="sig-param"><span class="n">headers</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/google/resumable_media/requests/upload.html#SimpleUpload"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.resumable_media.requests.SimpleUpload" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload a resource to a Google API.</p>
<p>A <strong>simple</strong> media upload sends no metadata and completes the upload
in a single request.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>upload_url</strong> (<a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The URL where the content will be uploaded.</p></li>
<li><p><strong>headers</strong> (<em>Optional</em><em>[</em><em>Mapping</em><em>[</em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>]</em><em>]</em>) – Extra headers that should
be sent with the request, e.g. headers for encrypted data.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="google.resumable_media.requests.SimpleUpload.upload_url">
<code class="sig-name descname">upload_url</code><a class="headerlink" href="#google.resumable_media.requests.SimpleUpload.upload_url" title="Permalink to this definition">¶</a></dt>
<dd><p>The URL where the content will be uploaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="google.resumable_media.requests.SimpleUpload.finished">
<em class="property">property </em><code class="sig-name descname">finished</code><a class="headerlink" href="#google.resumable_media.requests.SimpleUpload.finished" title="Permalink to this definition">¶</a></dt>
<dd><p>Flag indicating if the upload has completed.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#bool" title="(in Python v3.7)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="google.resumable_media.requests.SimpleUpload.transmit">
<code class="sig-name descname">transmit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">transport</span></em>, <em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">content_type</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">61, 60</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/google/resumable_media/requests/upload.html#SimpleUpload.transmit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.resumable_media.requests.SimpleUpload.transmit" title="Permalink to this definition">¶</a></dt>
<dd><p>Transmit the resource to be uploaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transport</strong> (<em>Session</em>) – A <code class="docutils literal notranslate"><span class="pre">requests</span></code> object which can
make authenticated requests.</p></li>
<li><p><strong>data</strong> (<a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#bytes" title="(in Python v3.7)"><em>bytes</em></a>) – The resource content to be uploaded.</p></li>
<li><p><strong>content_type</strong> (<a class="reference external" href="https://python.readthedocs.io/en/latest/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The content type of the resource, e.g. a JPEG
image has content type <code class="docutils literal notranslate"><span class="pre">image/jpeg</span></code>.</p></li>
<li><p><strong>timeout</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>, </em><em>Tuple</em><em>[</em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>, </em><a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>]</em><em>]</em><em>]</em>) – <p>The number of seconds to wait for the server response.
Depending on the retry strategy, a request may be repeated
several times using the same timeout each time.</p>
<p>Can also be passed as a tuple (connect_timeout, read_timeout).
See <code class="xref py py-meth docutils literal notranslate"><span class="pre">requests.Session.request()</span></code> documentation for details.</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The HTTP response returned by <code class="docutils literal notranslate"><span class="pre">transport</span></code>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Response</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">google-resumable-media</a></h1>



<p class="blurb">Google Cloud Client Libraries for google-resumable-media</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=googleapis&repo=google-resumable-media-python&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="common.html">Common Utilities</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Requests Utilities</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#authorized-transport">Authorized Transport</a></li>
<li class="toctree-l2"><a class="reference internal" href="#simple-downloads">Simple Downloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunked-downloads">Chunked Downloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="#simple-uploads">Simple Uploads</a></li>
<li class="toctree-l2"><a class="reference internal" href="#multipart-uploads">Multipart Uploads</a></li>
<li class="toctree-l2"><a class="reference internal" href="#resumable-uploads">Resumable Uploads</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="common.html" title="previous chapter">Common Utilities</a></li>
      <li>Next: <a href="../changelog.html" title="next chapter">Changelog</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Google.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/resumable_media/requests.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/googleapis/google-resumable-media-python" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>